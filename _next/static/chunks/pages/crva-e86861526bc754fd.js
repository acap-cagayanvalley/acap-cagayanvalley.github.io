(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4631],{86786:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crva",function(){return n(12308)}])},61391:function(e){"use strict";var a={hazard:{very_low:"#fff5f0",low:"#fdbea5",moderate:"#fc7050",high:"#d42020",very_high:"#67000d"},adaptive_capacity:{very_low:"#fff5f0",low:"#c8ddf0",moderate:"#73b3d8",high:"#2879b9",very_high:"#08306b"}},n={very_low:"#fff5f0",low:"#fdbea5",moderate:"#fc7050",high:"#d42020",very_high:"#67000d"},l={gain:"#ffc001",gain_1:"#ffff01",gain_2:"#e9fc86",no_loss:"#ffffff",loss_1:"#eb362a",loss_2:"#ba1419",loss:"#67000d",mask:"#73767f"};e.exports={legend_colors:a,crop_crva_legends:n,crop_sensitivity_legends:l,getCropCrvaColor:function(e){return e<=.2?n.very_low:e<=.4?n.low:e<=.6?n.moderate:e<=.8?n.high:e<=1?n.very_high:void 0},getCropSensitivityColor:function(e){return e>=-1&&e<=-.5?l.gain:e<=-.25?l.gain_1:e<=-.001?l.gain_2:e<=.001?l.no_loss:e<=.25?l.loss_1:e<=.5?l.loss_2:e<=99?l.loss:l.mask},getLegendColor:function(e,n){return e<=.2?a[n].very_low:e<=.4?a[n].low:e<=.6?a[n].moderate:e<=.8?a[n].high:e<=1?a[n].very_high:void 0},options:[{value:"hazard",label:"Hazard"},{value:"adaptive_capacity",label:"Adaptive Capacity"},{value:"crop_sensitivity",label:"Sensitivity"},{value:"crop_crva",label:"Crop CRVA"}],province:[{value:"bat",label:"Batanes"},{value:"cag",label:"Cagayan"},{value:"isa",label:"Isabela"},{value:"nue",label:"Nueva Vizcaya"},{value:"qui",label:"Quirino"}],_descKeys:{adaptive_capacity:"The ability of a system to adjust to climate change (including climate\n      variability and extremes) to moderate potential damages, to take advantage of\n      opportunities, or to cope with the consequences (IPCC 2014).",crop_crva:"The ability of a system to adjust to climate change (including climate\n      variability and extremes) to moderate potential damages, to take advantage of\n      opportunities, or to cope with the consequences (IPCC 2014).",crop_sensitivity:"The increase or decrease of climatic suitability of selected crops to changes in\n      temperature and precipitation (Parker et al. 2019)",hazard:"The nature and degree to which a system is exposed to significant climate\n      variations (IPCC 2014)."},_crop_options:{bat:{crop_sensitivity:[{value:"abaca_sens",label:"Abaca"},{value:"banana_sens",label:"Banana"},{value:"cacao_coffee_sens",label:"Cacao Coffee"},{value:"coconut_sens",label:"Coconut"},{value:"corn_sens",label:"Corn"},{value:"fruit_trees_sens",label:"Fruit Trees"},{value:"rice_sens",label:"Rice"},{value:"rubber_sens",label:"Rubber"},{value:"vegetable_sens",label:"Vegetable"}],crop_crva:[{value:"abaca_v1",label:"Abaca"},{value:"banana_v1",label:"Banana"},{value:"cacao_coffee_v1",label:"Cacao Coffee"},{value:"coconut_v1",label:"Coconut"},{value:"corn_v1",label:"Corn"},{value:"fruit_trees_v1",label:"Fruit Trees"},{value:"rice_v1",label:"Rice"},{value:"rubber_v1",label:"Rubber"},{value:"vegetable_v1",label:"Vegetable"}]},cag:{crop_sensitivity:[{value:"banana_sens",label:"Banana"},{value:"cacao_sens",label:"Cacao"},{value:"corn_sens",label:"Corn"},{value:"mango_sens",label:"Mango"},{value:"rice_sens",label:"Rice"},{value:"rubber_sens",label:"Rubber"},{value:"vegetable_sens",label:"Vegetable"}],crop_crva:[{value:"banana_v1",label:"Banana"},{value:"cacao_v1",label:"Cacao"},{value:"corn_v1",label:"Corn"},{value:"mango_v1",label:"Mango"},{value:"rice_v1",label:"Rice"},{value:"rubber_v1",label:"Rubber"},{value:"vegetable_v1",label:"Vegetable"}]},isa:{crop_sensitivity:[{value:"abaca_sens",label:"Abaca"},{value:"banana_sens",label:"Banana"},{value:"cacao_sens",label:"Cacao"},{value:"calamansi_sens",label:"Calamansi"},{value:"cassava_sens",label:"Cassava"},{value:"coconut_sens",label:"Coconut"},{value:"coffee_sens",label:"Coffee"},{value:"corn_sens",label:"Corn"},{value:"fruit_trees_sens",label:"Fruit Trees"},{value:"palm_oil_sens",label:"Palm Oil"},{value:"rice_sens",label:"Rice"},{value:"rubber_sens",label:"Rubber"},{value:"tobacco_sens",label:"Tobacco"},{value:"vegetable_sens",label:"Vegetable"}],crop_crva:[{value:"abaca_v1",label:"Abaca"},{value:"banana_v1",label:"Banana"},{value:"cacao_v1",label:"Cacao"},{value:"calamansi_v1",label:"Calamansi"},{value:"cassava_v1",label:"Cassava"},{value:"coconut_v1",label:"Coconut"},{value:"coffee_v1",label:"Coffee"},{value:"corn_v1",label:"Corn"},{value:"fruit_trees_v1",label:"Fruit Trees"},{value:"palm_oil_v1",label:"Palm Oil"},{value:"rice_v1",label:"Rice"},{value:"rubber_v1",label:"Rubber"},{value:"tobacco_v1",label:"Tobacco"},{value:"vegetable_v1",label:"Vegetable"}]}}}},12308:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return w}});var l=n(85893),t=n(67294),r=n(9473),o=n(57172),i=n(87357),s=n(61903),c=n(18972),u=n(93946),v=n(63343),d=n(87109),f=n(15861),b=n(61391);function p(e){var a;return(0,l.jsx)(i.Z,{component:"form",sx:{"& .MuiTextField-root":{width:"100%"}},noValidate:!0,autoComplete:"off",children:(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",maxWidth:e.windowWidth<710?"100%":"350px",justifyContent:"flex-start"},children:[(0,l.jsx)(s.Z,{margin:"normal",id:"outlined-select-currency",select:!0,label:"Province",value:e.selectedProvince||"",onChange:e.handleProvinceSelection,InputProps:{endAdornment:e.selectedProvince&&(0,l.jsx)(d.Z,{position:"end",children:(0,l.jsx)(u.Z,{onClick:function(){return e.handleProvinceSelection({target:{value:""}})},"aria-label":"clear selection",size:"small",children:(0,l.jsx)(v.Z,{})})})},children:b.province.map((function(e){return(0,l.jsx)(c.Z,{value:e.value,children:e.label},e.value)}))}),(0,l.jsx)(s.Z,{margin:"normal",id:"outlined-select-currency",select:!0,label:"Map",defaultValue:"hazard",onChange:e.handleMapSelection,children:b.options.map((function(e){return(0,l.jsx)(c.Z,{value:e.value,children:e.label},e.value)}))}),"hazard"!==e.selection&&"adaptive_capacity"!==e.selection&&(0,l.jsx)(s.Z,{margin:"normal",id:"outlined-select-currency",select:!0,label:"Crop",defaultValue:"",onChange:e.handleCropSelection,children:null===b._crop_options||void 0===b._crop_options||null===(a=b._crop_options[e.selectedProvince])||void 0===a?void 0:a[e.selection].map((function(e){return(0,l.jsx)(c.Z,{value:e.value,children:e.label},e.value)}))}),(0,l.jsx)(f.Z,{sx:{fontSize:"12px",color:"#353935"},children:"Map Description:"}),(0,l.jsx)(f.Z,{sx:{fontSize:"12px",color:"#353935"},children:b._descKeys[e.selection]})]})})}var _={adaptive_capacity:["Very Low","Low","Moderate","High","Very High"],crop_crva:["Very Low","Low","Moderate","High","Very High"],hazard:["Very Low","Low","Moderate","High","Very High"],crop_sensitivity:["Gain","Gain_1","Gain_2","No Change","Loss_1","Loss_2","Loss"]},h={adaptive_capacity:["#fff5f0","#c8ddf0","#73b3d8","#2879b9","#08306b"],crop_crva:["#fff5f0","#fdbea5","#fc7050","#d42020","#67000d"],hazard:["#fff5f0","#fdbea5","#fc7050","#d42020","#67000d"],crop_sensitivity:["#ffc001","#ffff01","#e9fc86","#ffffff","#eb362a","#ba1419","#67000d","#73767f"]};var g=function(e){var a=function(e){var a=e.split("_");return"1"===a[1]||"2"===a[1]?" ":a[0]};return(0,l.jsx)("div",{children:(0,l.jsx)(i.Z,{sx:{position:"absolute",zIndex:"99"},children:(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:["crop_sensitivity"===e.selection&&(0,l.jsx)(f.Z,{sx:{color:"#353935"},children:" Baseline - Future 2050"}),(0,l.jsx)(f.Z,{sx:{fontSize:"12px"},children:"Legend:"}),(0,l.jsx)("div",{children:_[e.selection].map((function(n,t){return(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",margin:"5px"},children:[(0,l.jsx)("div",{style:{width:"20px",height:"20px",backgroundColor:h[e.selection][t],marginRight:"1em",border:"1px solid gray"},children:" "}),(0,l.jsxs)(f.Z,{sx:{fontSize:"12px"},children:[" - ",a(_[e.selection][t])," "]})]},t)}))})]})})})};function y(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}var x={bat:"/bat.json",cag:"/cag.json",isa:"/isa.json",nue:"/nue.json",qui:"/qui.json"},C={bat:{center:[121.9,20.5],scale:29e3},cag:{center:[121.7,18.4],scale:1e4},isa:{center:[121.9,16.8],scale:14e3},nue:{center:[121.15,16.1],scale:15e3},qui:{center:[121.6,16.1],scale:15e3},default:{center:[121.6,18.3],scale:4500}};function m(e){var a=function(e){if(void 0!==e){if(""!==L)switch(w){case"crop_crva":return(0,b.getCropCrvaColor)(e);case"crop_sensitivity":return(0,b.getCropSensitivityColor)(e);default:return}return V(""),(0,b.getLegendColor)(e,w)}},n=function(e){M((function(a){return function(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{},l=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),l.forEach((function(a){y(e,a,n[a])}))}return e}({},a,e)}))},r=(0,t.useState)(null),s=r[0],c=r[1],u=(0,t.useState)({x:1,y:0}),v=u[0],d=u[1],_=(0,t.useState)([]),h=_[0],m=_[1],j=(0,t.useState)("hazard"),w=j[0],k=j[1],E=(0,t.useState)(""),P=E[0],I=E[1],S=(0,t.useState)(""),L=S[0],V=S[1],Z=(0,t.useState)({}),M=(Z[0],Z[1]),R=(0,t.useState)(0),z=R[0],O=R[1];(0,t.useEffect)((function(){if(Array.isArray(e.data))if(P){var a=e.data.filter((function(e){return e.prov===P}));m(a)}else m(e.data)}),[P,e.data]),(0,t.useEffect)((function(){var e=function(){return O(A())};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var A=function(){var e=document.getElementById("header-contents");return e?e.getBoundingClientRect().width:1200},N=function(e,a){c(e.properties.MUNICIPALI||e.properties.PROVINCE),d({x:a.clientX,y:a.clientY})},T=function(){c(null)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.Z,{variant:z<710?"h6":"h4",sx:{marginBottom:"20px"},children:"Climate Risk Vulnerability Assessment"}),(0,l.jsxs)(i.Z,{sx:{display:"flex",flexDirection:z<710?"column":"row"},children:[(0,l.jsx)(g,{selection:w}),(0,l.jsxs)(i.Z,{sx:{flexGrow:2},children:[s&&(0,l.jsx)(i.Z,{sx:{position:"absolute",top:v.y,left:v.x,background:"rgba(0, 0, 0, 0.5)",color:"#EEE",padding:"5px 10px",borderRadius:"8px",fontSize:"0.9rem",pointerEvents:"none",zIndex:1e3},children:s}),(0,l.jsxs)(o.ComposableMap,{projection:"geoMercator",width:500,height:450,projectionConfig:{center:P?C[P].center:z<710?[120.4,18]:C.default.center,scale:P?C[P].scale:z<710?4700:C.default.scale},style:{width:"100%"},children:[!P&&(0,l.jsx)(o.Geographies,{geography:"/r2.json",children:function(e){return e.geographies.map((function(e){var t=e.properties.PROVINCE?e.properties.PROVINCE.toLowerCase().substring(0,3):"",r=null===h||void 0===h?void 0:h.find((function(a){return e.properties.MUNICIPALI&&a.mun===e.properties.MUNICIPALI&&a.prov===e.properties.PROVINCE||e.properties.ADM2_PCODE&&a.prov===t}));return(0,l.jsx)(o.Geography,{geography:e,fill:void 0===r?"#EEE":a(""===L?r[w]:r[L]),onMouseEnter:function(a){return N(e,a)},onMouseLeave:T,stroke:void 0===r?"floralwhite":"black",strokeWidth:.5,style:{default:{outline:"none"},hover:{outline:"none",stroke:"floralwhite",strokeWidth:1},pressed:{outline:"none",stroke:"floralwhite",strokeWidth:2}},onClick:function(){return n(r)}},e.rsmKey)}))}}),P&&(0,l.jsx)(o.Geographies,{geography:x[P],children:function(e){return e.geographies.map((function(e){var t=null===h||void 0===h?void 0:h.find((function(a){return a.mun===e.properties.MUNICIPALI}));return(0,l.jsx)(o.Geography,{geography:e,fill:void 0===t?"#EEE":a(""===L?t[w]:t[L]),onMouseEnter:function(a){return N(e,a)},onMouseLeave:T,stroke:void 0===t?"floralwhite":"black",strokeWidth:.8,style:{default:{outline:"none"},hover:{outline:"none",stroke:"floralwhite",strokeWidth:1.5},pressed:{outline:"none",stroke:"floralwhite",strokeWidth:2.5}},onClick:function(){return n(t)}},e.rsmKey)}))}})]})]}),(0,l.jsx)(i.Z,{children:(0,l.jsx)(p,{handleMapSelection:function(e){V(""),k(e.target.value)},handleProvinceSelection:function(e){I(e.target.value)},handleCropSelection:function(e){V(e.target.value)},selection:w,selectedCrop:L,selectedProvince:P,windowWidth:z})})]})]})}var j=n(48875);var w=function(){var e=(0,r.I0)(),a=(0,r.v9)((function(e){return e.crva})),n=a.crva_data,o=a.loading,s=a.error;return(0,t.useEffect)((function(){var a=new AbortController;return e((0,j.Y)(a.signal)),function(){a.abort()}}),[e]),(0,l.jsxs)(i.Z,{children:[o&&(0,l.jsx)("p",{children:"Loading data..."}),s&&(0,l.jsxs)("p",{children:["Error: ",s]}),!o&&!s&&(0,l.jsx)(m,{data:n})]})}}},function(e){e.O(0,[5778,2702,972,1903,2036,9774,2888,179],(function(){return a=86786,e(e.s=a);var a}));var a=e.O();_N_E=a}]);